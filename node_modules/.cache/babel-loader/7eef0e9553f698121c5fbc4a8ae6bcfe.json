{"ast":null,"code":"import _toConsumableArray from\"C:/Users/moknial01/Documents/suivi-dossier-logement2/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _objectSpread from\"C:/Users/moknial01/Documents/suivi-dossier-logement2/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/Users/moknial01/Documents/suivi-dossier-logement2/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{Fragment,useEffect,useState}from\"react\";import EditableRow from\"./EditableRow\";import ReadOnlyRow from\"./ReadOnlyRow\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function TableNotes(porps){var _useState=useState({id:\"\",notes:\"\",code:\"\",nom:\"\"}),_useState2=_slicedToArray(_useState,2),noteElement=_useState2[0],setNoteElement=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),tableNote=_useState4[0],setTableNote=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),noteElementId=_useState6[0],setNoteElementId=_useState6[1];useEffect(function(){fetch(\"http://localhost:3005/TableNotes\").then(function(response){return response.json();}).then(function(data){setTableNote(data);}).catch(function(err){return console.log(err);});},[]);var handleEditTableNote=function handleEditTableNote(event){event.preventDefault();var fieldName=event.target.getAttribute(\"name\");var fieldValue=event.target.value;var newNoteElement=_objectSpread({},noteElement);newNoteElement[fieldName]=fieldValue;setNoteElement(newNoteElement);};var handleEditClick=function handleEditClick(event,tableN){event.preventDefault();setNoteElementId(tableN.id);var formValues={id:tableN.id,notes:tableN.notes,code:tableN.code,nom:tableN.nom};setNoteElement(formValues);};var handleEditFormSubmit=function handleEditFormSubmit(event){event.preventDefault();var editedContact={id:noteElementId,notes:noteElement.notes,code:noteElement.code,nom:noteElement.nom};var editedNoteElement=_toConsumableArray(tableNote);var index=tableNote.findIndex(function(tableN){return tableN.id===noteElementId;});editedNoteElement[index]=editedContact;setTableNote(editedNoteElement);setNoteElementId(null);fetch(\"http://localhost:3005/TableNotes\",{method:\"put\",headers:{\"content-type\":\"application/json\"},body:JSON.stringify(editedContact)}).then(function(response){return response.json();}).then(function(user){if(user.id){alert(\"تم تعديل النقاط\");}}).catch(function(err){return alert(err);});};var handleCancelClick=function handleCancelClick(){setNoteElementId(null);};return/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"my-5\",children:\"\\u062C\\u062F\\u0648\\u0644 \\u0627\\u0644\\u062A\\u0646\\u0642\\u064A\\u0637\"}),/*#__PURE__*/_jsx(\"form\",{onSubmit:handleEditFormSubmit,children:/*#__PURE__*/_jsxs(\"table\",{className:\"table table-hover\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"thead-dark\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"\\u0627\\u0644\\u0648\\u0636\\u0639\\u064A\\u0629\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"\\u0627\\u0644\\u062A\\u0646\\u0642\\u064A\\u0637\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"\\u062A\\u063A\\u064A\\u064A\\u0631\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:tableNote.map(function(tableN){return/*#__PURE__*/_jsx(Fragment,{children:noteElementId===tableN.id?/*#__PURE__*/_jsx(EditableRow,{noteElement:noteElement,handleEditTableNote:handleEditTableNote,handleCancelClick:handleCancelClick}):/*#__PURE__*/_jsx(ReadOnlyRow,{tableN:tableN,handleEditClick:handleEditClick})});})})]})})]})});}export default TableNotes;","map":{"version":3,"names":["React","Fragment","useEffect","useState","EditableRow","ReadOnlyRow","TableNotes","porps","id","notes","code","nom","noteElement","setNoteElement","tableNote","setTableNote","noteElementId","setNoteElementId","fetch","then","response","json","data","catch","err","console","log","handleEditTableNote","event","preventDefault","fieldName","target","getAttribute","fieldValue","value","newNoteElement","handleEditClick","tableN","formValues","handleEditFormSubmit","editedContact","editedNoteElement","index","findIndex","method","headers","body","JSON","stringify","user","alert","handleCancelClick","map"],"sources":["C:/Users/moknial01/Documents/suivi-dossier-logement2/src/Components/TableNotes/TableNotes.js"],"sourcesContent":["import React, { Fragment, useEffect, useState } from \"react\";\r\nimport EditableRow from \"./EditableRow\";\r\nimport ReadOnlyRow from \"./ReadOnlyRow\";\r\n\r\nfunction TableNotes(porps) {\r\n  const [noteElement, setNoteElement] = useState({\r\n    id: \"\",\r\n    notes: \"\",\r\n    code: \"\",\r\n    nom: \"\",\r\n  });\r\n  const [tableNote, setTableNote] = useState([]);\r\n  const [noteElementId, setNoteElementId] = useState(null);\r\n\r\n  useEffect(() => {\r\n    fetch(\"http://localhost:3005/TableNotes\")\r\n      .then((response) => response.json())\r\n      .then((data) => {\r\n        setTableNote(data);\r\n      })\r\n      .catch((err) => console.log(err));\r\n  }, []);\r\n\r\n  const handleEditTableNote = (event) => {\r\n    event.preventDefault();\r\n\r\n    const fieldName = event.target.getAttribute(\"name\");\r\n    const fieldValue = event.target.value;\r\n\r\n    const newNoteElement = { ...noteElement };\r\n    newNoteElement[fieldName] = fieldValue;\r\n\r\n    setNoteElement(newNoteElement);\r\n  };\r\n\r\n  const handleEditClick = (event, tableN) => {\r\n    event.preventDefault();\r\n    setNoteElementId(tableN.id);\r\n\r\n    const formValues = {\r\n      id: tableN.id,\r\n      notes: tableN.notes,\r\n      code: tableN.code,\r\n      nom: tableN.nom,\r\n    };\r\n\r\n    setNoteElement(formValues);\r\n  };\r\n\r\n  const handleEditFormSubmit = (event) => {\r\n    event.preventDefault();\r\n\r\n    const editedContact = {\r\n      id: noteElementId,\r\n      notes: noteElement.notes,\r\n      code: noteElement.code,\r\n      nom: noteElement.nom,\r\n    };\r\n\r\n    const editedNoteElement = [...tableNote];\r\n\r\n    const index = tableNote.findIndex((tableN) => tableN.id === noteElementId);\r\n\r\n    editedNoteElement[index] = editedContact;\r\n\r\n    setTableNote(editedNoteElement);\r\n    setNoteElementId(null);\r\n\r\n    fetch(\"http://localhost:3005/TableNotes\", {\r\n      method: \"put\",\r\n      headers: { \"content-type\": \"application/json\" },\r\n      body: JSON.stringify(editedContact),\r\n    })\r\n      .then((response) => response.json())\r\n      .then((user) => {\r\n        if (user.id) {\r\n          alert(\"تم تعديل النقاط\");\r\n        }\r\n      })\r\n      .catch((err) => alert(err));\r\n  };\r\n\r\n  const handleCancelClick = () => {\r\n    setNoteElementId(null);\r\n  };\r\n\r\n  return (\r\n    <div className=\"container\">\r\n      <div>\r\n        <h1 className=\"my-5\">جدول التنقيط</h1>\r\n        <form onSubmit={handleEditFormSubmit}>\r\n          <table className=\"table table-hover\">\r\n            <thead className=\"thead-dark\">\r\n              <tr>\r\n                <th scope=\"col\">الوضعية</th>\r\n                <th scope=\"col\">التنقيط</th>\r\n                <th scope=\"col\">تغيير</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {tableNote.map((tableN) => (\r\n                <Fragment>\r\n                  {noteElementId === tableN.id ? (\r\n                    <EditableRow\r\n                      noteElement={noteElement}\r\n                      handleEditTableNote={handleEditTableNote}\r\n                      handleCancelClick={handleCancelClick}\r\n                    />\r\n                  ) : (\r\n                    <ReadOnlyRow\r\n                      tableN={tableN}\r\n                      handleEditClick={handleEditClick}\r\n                    />\r\n                  )}\r\n                </Fragment>\r\n              ))}\r\n            </tbody>\r\n          </table>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default TableNotes;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}