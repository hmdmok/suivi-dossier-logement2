{"ast":null,"code":"import _defineProperty from\"C:/Users/moknial01/Documents/suivi-dossier-logement2/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _classCallCheck from\"C:/Users/moknial01/Documents/suivi-dossier-logement2/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"C:/Users/moknial01/Documents/suivi-dossier-logement2/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"C:/Users/moknial01/Documents/suivi-dossier-logement2/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"C:/Users/moknial01/Documents/suivi-dossier-logement2/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React from'react';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Login=/*#__PURE__*/function(_React$Component){_inherits(Login,_React$Component);var _super=_createSuper(Login);function Login(props){var _this;_classCallCheck(this,Login);_this=_super.call(this,props);_this.onHandleChange=function(event){_this.setState(_defineProperty({},event.target.name,event.target.value));};_this.onSubmitLogin=function(event){event.preventDefault();fetch('http://localhost:3005/Login',{method:'post',headers:{'content-type':'application/json'},body:JSON.stringify({username:_this.state.loginUsername,password:_this.state.loginPassword})}).then(function(response){return response.json();}).then(function(data){if(data.auth==='Success'){_this.props.loadUser(data.user);_this.props.setAuthent(true);_this.props.setUsertype(data.usertype);_this.props.history.push(\"/DisplayForm\");}else{_this.props.setAuthent(false);_this.props.setUsertype('');}}).catch(function(err){return console.log(err);});};_this.state={loginUsername:'',loginPassword:''};return _this;}_createClass(Login,[{key:\"render\",value:function render(){return/*#__PURE__*/_jsxs(\"form\",{onSubmit:this.onSubmitLogin,className:\"container form-signin border shadow p-3 my-5 bg-light bg-gradient rounded\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"h3 mb-3 font-weight-normal\",children:\"\\u0627\\u0644\\u0631\\u062C\\u0627\\u0621 \\u062A\\u0633\\u062C\\u064A\\u0644 \\u0627\\u0644\\u062F\\u062E\\u0648\\u0644\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"inputUsername\",className:\"sr-only\",children:\"\\u0627\\u0633\\u0645 \\u0627\\u0644\\u0645\\u0633\\u062A\\u062E\\u062F\\u0645\"}),/*#__PURE__*/_jsx(\"input\",{name:\"loginUsername\",onChange:this.onHandleChange,type:\"username\",id:\"inputUsername\",className:\"form-control text-right\",placeholder:\"\\u0627\\u0633\\u0645 \\u0627\\u0644\\u0645\\u0633\\u062A\\u062E\\u062F\\u0645\",required:true,autoFocus:true}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"inputPassword\",className:\"sr-only\",children:\"\\u0643\\u0644\\u0645\\u0629 \\u0627\\u0644\\u0633\\u0631\"}),/*#__PURE__*/_jsx(\"input\",{name:\"loginPassword\",onChange:this.onHandleChange,type:\"password\",id:\"inputPassword\",className:\"form-control text-right\",placeholder:\"\\u0643\\u0644\\u0645\\u0629 \\u0627\\u0644\\u0633\\u0631\",required:true}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-lg btn-primary btn-block\",type:\"submit\",children:\"\\u062A\\u0633\\u062C\\u064A\\u0644 \\u0627\\u0644\\u062F\\u062E\\u0648\\u0644\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-5 mb-3 text-muted\",children:\"\\xA9 2021\"})]});}}]);return Login;}(React.Component);export default Login;","map":{"version":3,"names":["React","Login","props","onHandleChange","event","setState","target","name","value","onSubmitLogin","preventDefault","fetch","method","headers","body","JSON","stringify","username","state","loginUsername","password","loginPassword","then","response","json","data","auth","loadUser","user","setAuthent","setUsertype","usertype","history","push","catch","err","console","log","Component"],"sources":["C:/Users/moknial01/Documents/suivi-dossier-logement2/src/Components/Login/Login.js"],"sourcesContent":["import React from 'react';\r\n\r\nclass Login extends React.Component {\r\n\r\n    constructor(props){\r\n        super(props);\r\n        this.state = {\r\n            loginUsername: '',\r\n            loginPassword: ''\r\n        }\r\n    }\r\n\r\n\r\n\r\n    onHandleChange = (event) => {\r\n        this.setState({[event.target.name]: event.target.value,});\r\n    }\r\n\r\n    onSubmitLogin = (event) => {\r\n        event.preventDefault();\r\n        fetch('http://localhost:3005/Login', {\r\n            method: 'post',\r\n            headers: {'content-type': 'application/json'},\r\n            body: JSON.stringify({\r\n                username: this.state.loginUsername,\r\n                password: this.state.loginPassword\r\n            })\r\n        })\r\n        .then(response => response.json())\r\n        .then(data => {\r\n            if(data.auth === 'Success'){\r\n                this.props.loadUser(data.user);\r\n                this.props.setAuthent(true);\r\n                this.props.setUsertype(data.usertype);\r\n                this.props.history.push(\"/DisplayForm\");\r\n            }else{\r\n                this.props.setAuthent(false);\r\n                this.props.setUsertype('');\r\n            }\r\n        }).catch(err => console.log(err));\r\n           \r\n    }\r\n \r\n    render(){\r\n        return (\r\n            <form\r\n                onSubmit={this.onSubmitLogin} \r\n                className=\"container form-signin border shadow p-3 my-5 bg-light bg-gradient rounded\">\r\n\r\n                <h1 className=\"h3 mb-3 font-weight-normal\">الرجاء تسجيل الدخول</h1>\r\n                <label htmlFor=\"inputUsername\" className=\"sr-only\">اسم المستخدم</label>\r\n                <input \r\n                    name=\"loginUsername\"\r\n                    onChange={this.onHandleChange} \r\n                    type=\"username\" \r\n                    id=\"inputUsername\" \r\n                    className=\"form-control text-right\" \r\n                    placeholder=\"اسم المستخدم\" \r\n                    required\r\n                    autoFocus \r\n                />\r\n                <label htmlFor=\"inputPassword\" className=\"sr-only\">كلمة السر</label>\r\n                <input \r\n                    name=\"loginPassword\"\r\n                    onChange={this.onHandleChange} \r\n                    type=\"password\" \r\n                    id=\"inputPassword\" \r\n                    className=\"form-control text-right\" \r\n                    placeholder=\"كلمة السر\" \r\n                    required\r\n                />\r\n                <hr/>\r\n                <button \r\n                    \r\n                    className=\"btn btn-lg btn-primary btn-block\" \r\n                    type=\"submit\"\r\n                >\r\n                    تسجيل الدخول\r\n                </button>\r\n                <p className=\"mt-5 mb-3 text-muted\">© 2021</p>\r\n            </form>\r\n        );\r\n    }\r\n}\r\n\r\nexport default Login;"],"mappings":"oqBAAA,MAAOA,MAAP,KAAkB,OAAlB,C,2FAEMC,M,0GAEF,eAAYC,KAAZ,CAAkB,uCACd,uBAAMA,KAAN,EADc,MAUlBC,cAVkB,CAUD,SAACC,KAAD,CAAW,CACxB,MAAKC,QAAL,oBAAgBD,KAAK,CAACE,MAAN,CAAaC,IAA7B,CAAoCH,KAAK,CAACE,MAAN,CAAaE,KAAjD,GACH,CAZiB,OAclBC,aAdkB,CAcF,SAACL,KAAD,CAAW,CACvBA,KAAK,CAACM,cAAN,GACAC,KAAK,CAAC,6BAAD,CAAgC,CACjCC,MAAM,CAAE,MADyB,CAEjCC,OAAO,CAAE,CAAC,eAAgB,kBAAjB,CAFwB,CAGjCC,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAe,CACjBC,QAAQ,CAAE,MAAKC,KAAL,CAAWC,aADJ,CAEjBC,QAAQ,CAAE,MAAKF,KAAL,CAAWG,aAFJ,CAAf,CAH2B,CAAhC,CAAL,CAQCC,IARD,CAQM,SAAAC,QAAQ,QAAIA,SAAQ,CAACC,IAAT,EAAJ,EARd,EASCF,IATD,CASM,SAAAG,IAAI,CAAI,CACV,GAAGA,IAAI,CAACC,IAAL,GAAc,SAAjB,CAA2B,CACvB,MAAKxB,KAAL,CAAWyB,QAAX,CAAoBF,IAAI,CAACG,IAAzB,EACA,MAAK1B,KAAL,CAAW2B,UAAX,CAAsB,IAAtB,EACA,MAAK3B,KAAL,CAAW4B,WAAX,CAAuBL,IAAI,CAACM,QAA5B,EACA,MAAK7B,KAAL,CAAW8B,OAAX,CAAmBC,IAAnB,CAAwB,cAAxB,EACH,CALD,IAKK,CACD,MAAK/B,KAAL,CAAW2B,UAAX,CAAsB,KAAtB,EACA,MAAK3B,KAAL,CAAW4B,WAAX,CAAuB,EAAvB,EACH,CACJ,CAnBD,EAmBGI,KAnBH,CAmBS,SAAAC,GAAG,QAAIC,QAAO,CAACC,GAAR,CAAYF,GAAZ,CAAJ,EAnBZ,EAqBH,CArCiB,CAEd,MAAKjB,KAAL,CAAa,CACTC,aAAa,CAAE,EADN,CAETE,aAAa,CAAE,EAFN,CAAb,CAFc,aAMjB,C,wCAiCD,iBAAQ,CACJ,mBACI,cACI,QAAQ,CAAE,KAAKZ,aADnB,CAEI,SAAS,CAAC,2EAFd,wBAII,WAAI,SAAS,CAAC,4BAAd,sHAJJ,cAKI,cAAO,OAAO,CAAC,eAAf,CAA+B,SAAS,CAAC,SAAzC,iFALJ,cAMI,cACI,IAAI,CAAC,eADT,CAEI,QAAQ,CAAE,KAAKN,cAFnB,CAGI,IAAI,CAAC,UAHT,CAII,EAAE,CAAC,eAJP,CAKI,SAAS,CAAC,yBALd,CAMI,WAAW,CAAC,qEANhB,CAOI,QAAQ,KAPZ,CAQI,SAAS,KARb,EANJ,cAgBI,cAAO,OAAO,CAAC,eAAf,CAA+B,SAAS,CAAC,SAAzC,+DAhBJ,cAiBI,cACI,IAAI,CAAC,eADT,CAEI,QAAQ,CAAE,KAAKA,cAFnB,CAGI,IAAI,CAAC,UAHT,CAII,EAAE,CAAC,eAJP,CAKI,SAAS,CAAC,yBALd,CAMI,WAAW,CAAC,mDANhB,CAOI,QAAQ,KAPZ,EAjBJ,cA0BI,aA1BJ,cA2BI,eAEI,SAAS,CAAC,kCAFd,CAGI,IAAI,CAAC,QAHT,iFA3BJ,cAkCI,UAAG,SAAS,CAAC,sBAAb,uBAlCJ,GADJ,CAsCH,C,mBAhFeH,KAAK,CAACsC,S,EAmF1B,cAAerC,MAAf"},"metadata":{},"sourceType":"module"}